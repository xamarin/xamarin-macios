<?xml version="1.0" encoding="utf-8"?>
<!-- This file is not processed by xharness, and contains logic shared by all our test suites -->
<Project>
	<!-- NativeLibName: the platform-specific subdirectory of tests/test-libraries/.libs where to get libraries with all the relevant architectures -->

	<!-- Logic for iOS -->
	<PropertyGroup Condition="$(TargetFramework.EndsWith('-ios'))">
		<AssetTargetFallback>xamarinios10;$(AssetTargetFallback)</AssetTargetFallback>
		<NativeLibName>ios-fat</NativeLibName>
		<!-- We need this because we'd otherwise default to the latest OS version we support, and we'll want to execute on earlier versions -->
		<SupportedOSPlatformVersion>10.0</SupportedOSPlatformVersion>
	</PropertyGroup>
	<ItemGroup Condition="'$(_PlatformName)' == 'iOS'">
		<ProjectReference Include="$(MSBuildThisFileDirectory)/../../external/MonoTouch.Dialog/MonoTouch.Dialog/dotnet/$(_PlatformName)/MonoTouch.Dialog.csproj" />
	</ItemGroup>

	<!-- Logic for tvOS -->
	<PropertyGroup Condition="$(TargetFramework.EndsWith('-tvos'))">
		<DefineConstants>$(DefineConstants);XAMCORE_3_0</DefineConstants>
		<AssetTargetFallback>xamarintvos10;$(AssetTargetFallback)</AssetTargetFallback>
		<NativeLibName>tvos-fat</NativeLibName>
		<SupportedOSPlatformVersion>10.0</SupportedOSPlatformVersion>
	</PropertyGroup>
	<ItemGroup Condition="$(TargetFramework.EndsWith('-tvos'))">
		<ProjectReference Include="$(MSBuildThisFileDirectory)/../../external/MonoTouch.Dialog/MonoTouch.Dialog/dotnet/$(_PlatformName)/MonoTouch.Dialog.csproj" />
	</ItemGroup>

	<!-- Logic for macOS -->
	<PropertyGroup Condition="$(TargetFramework.EndsWith('-macos'))">
		<DefineConstants>$(DefineConstants);MONOMAC</DefineConstants>
		<NativeLibName>macos-fat</NativeLibName>
		<SupportedOSPlatformVersion>10.14</SupportedOSPlatformVersion>
	</PropertyGroup>

	<!-- Logic for Mac Catalyst -->
	<PropertyGroup Condition="$(TargetFramework.EndsWith('-maccatalyst'))">
		<AssetTargetFallback>xamarinios10;$(AssetTargetFallback)</AssetTargetFallback>
		<NativeLibName>maccatalyst-fat</NativeLibName>
		<SupportedOSPlatformVersion>13.3</SupportedOSPlatformVersion>
	</PropertyGroup>

	<!-- Logic for all test suites -->
	<ItemGroup>
		<PackageReference Include="NUnitLite" Version="3.12.0" />
		<ProjectReference Include="$(MSBuildThisFileDirectory)\..\..\external\Touch.Unit\Touch.Client\dotnet\$(_PlatformName)\Touch.Client-$(_PlatformName).dotnet.csproj" />
		<!-- MonoTouch.Dialog references System.Json, which isn't shipped with .NET5, so reference the NuGet instead -->
		<PackageReference Include="System.Json" Version="4.7.1" />
	</ItemGroup>
</Project>
